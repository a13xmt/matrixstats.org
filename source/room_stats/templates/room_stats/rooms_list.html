{% extends 'room_stats/base.html' %}

{% block title %}
  {{ title }}
{% endblock %}

{% block content %}
  <div itemscope itemtype="https://schema.org/BreadcrumbList">
  {% for room in rooms %}
    {% url 'room-stats' room_id=room.id as room_url %}

    <div itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">

      <a class="room-container {% if room.is_public_readable %}room-public{% endif %}"
        href="{% url 'room-stats' room_id=room.id %}" itemprop="item">
        <meta itemprop="position" content="{{ forloop.counter }}" />
        <meta itemprop="name" content="{{ room.name }}" />
        <meta itemprop="alternateName" content="{{ room.id }}" />
        <meta itemprop="identifier" content="{{ room.id }}" />

        <h1 class="room-name">{{ room.name }}</h1>

        <div class="room-description">
          {% if room.topic %}
            <span itemprop="description">{{ room.topic }}</span>
          {% else %}
            <i class="room-desc-empty">No description is provided</i>
          {% endif %}
        </div>

        <div class="room-members-stats">

          <div class="room-members-count">
            {{ room.members_count }}
          </div>

          <div class="room-members-modifier">
            {% if rating %}
              {% if rating == 'absolute' %}
                {{ room.delta|stringformat:"+d" }}
              {% endif %}
              {% if rating == 'relative' %}
                {% if room.members_from == 0 or room.percentage > 300 %}
                  New
                {% else %}
                  {% if room.percentage > 0 %}+{% else %}-{% endif %}{{ room.percentage|floatformat:"2" }}&#37;
                {% endif %}
              {% endif %}
            {% endif %}
          </div>

        </div>

      </a>
    </div>

  {% endfor %}

  {% if rooms.has_other_pages %}
    <div class="pagination">
      {% if rooms.has_previous %}
        <a href="?page={{ rooms.previous_page_number }}">&laquo;</a>
      {% endif %}

      <a class="active">{{ rooms.number }} / {{ rooms.paginator.num_pages}}</a>

      {% if rooms.has_next %}
        <a href="?page={{ rooms.next_page_number }}">&raquo;</a>
      {% endif %}
    </div>
  {% endif %}


  </div>
{% endblock content %}
